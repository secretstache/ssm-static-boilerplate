.template-interactive-map {
    --filter-color: var(--black);
    --filter-active-color: var(--white);

    display: flex;
    flex-direction: column;
    gap: rem-calc(85);

    &__description {
        width: 100%;
        max-width: rem-calc(407);
    }

    &__nav {
        display: flex;
        row-gap: rem-calc(1);
        flex-wrap: wrap;
        justify-content: center;
        margin-bottom: rem-calc(100);

        @include breakpoint(small only) {
            flex-direction: column;

            &-item {
                width: 100%;
            }
        }

        &-item {
            span {
                display: flex;
                justify-content: center;
                align-items: center;
                transition: var(--tr);
                cursor: pointer;
                outline: rem-calc(1) solid var(--filter-color);
                background: transparent;
                background: var(--filter-active-color);
                padding: rem-calc(0 30);
                min-width: rem-calc(212);
                height: rem-calc(64);
                color: var(--filter-color);
            }

            &:hover {
                span {
                    background: var(--filter-color);
                    color: var(--filter-active-color);
                }
            }

            input {
                display: none;

                &:checked + span {
                    background: var(--filter-color);
                    color: var(--filter-active-color);
                }
            }
        }
    }

    &__map {
        #map {
            display: flex;
            margin: 0 auto;
            background: transparent;
            width: 100%;
            max-width: 100%;
            height: 100%;
            max-height: 100%;

            &::before {
                display: block;
                padding-top: 68.5%;
                content: "";

                @include breakpoint(small only) {
                    padding-top: 100%;
                }
            }
        }

        .leaflet-container {
            .leaflet-popup-content-wrapper {
                box-shadow: none;
                border-radius: 0;
                background: var(--black);
                width: rem-calc(223);
                height: rem-calc(214);
                color: var(--white);

                &::before {
                    display: block;
                    position: absolute;
                    top: rem-calc(-10);
                    left: rem-calc(-21);
                    transform: rotate(55deg);
                    background: var(--light-grey);
                    width: rem-calc(29);
                    height: rem-calc(1);
                    content: "";
                }

                .leaflet-popup-content {
                    margin: 0;
                    padding: rem-calc(24);
                    font-size: rem-calc(14);
                    line-height: 160%;
                    font-family: var(--primary-font);
                    letter-spacing: rem-calc(0.28);
                    text-shadow: rem-calc(0 4 4) rgb(0 0 0 / 25%);

                    span {
                        display: block;
                        margin-bottom: rem-calc(15);
                        font-weight: 500;
                        font-size: rem-calc(16);
                        text-shadow: none;
                        text-transform: uppercase;
                    }

                    a {
                        display: block;
                        margin-top: rem-calc(30);
                        color: var(--white);
                        font-weight: 500;
                        text-decoration-line: underline;
                    }
                }
            }

            .leaflet-marker-icon.is-active {
                svg {
                    circle,
                    path,
                    line {
                        transition: var(--tr);
                        fill: var(--light-grey);
                    }
                }
            }

            .leaflet-div-icon {
                border: none;
                background: none;
            }

            .leaflet-popup {
                margin: 0 !important;

                .leaflet-popup-tip-container {
                    display: none;
                }
            }
        }
    }
}

.marker-cluster-small {
    background-color: rgb(181 226 140 / 60%);

    > div {
        background-color: rgb(110 204 57 / 60%);
    }
}

.marker-cluster-medium {
    background-color: rgb(241 211 87 / 60%);

    > div {
        background-color: rgb(240 194 12 / 60%);
    }
}

.marker-cluster-large {
    background-color: rgb(253 156 115 / 60%);

    > div {
        background-color: rgb(241 128 23 / 60%);
    }
}

/* IE 6-8 fallback colors */
.leaflet-oldie .marker-cluster-small {
    background-color: rgb(181 226 140);

    > div {
        background-color: rgb(110 204 57);
    }
}

.leaflet-oldie .marker-cluster-medium {
    background-color: rgb(241 211 87);

    > div {
        background-color: rgb(240 194 12);
    }
}

.leaflet-oldie .marker-cluster-large {
    background-color: rgb(253 156 115);

    > div {
        background-color: rgb(241 128 23);
    }
}

.marker-cluster {
    border-radius: rem-calc(20);
    background-clip: padding-box;

    > div {
        margin-top: rem-calc(5);
        margin-left: rem-calc(5);
        border-radius: rem-calc(15);
        width: rem-calc(30);
        height: rem-calc(30);
        text-align: center;

        span {
            line-height: rem-calc(30);
        }
    }
}

.leaflet-cluster-anim .leaflet-marker-icon,
.leaflet-cluster-anim .leaflet-marker-shadow {
    transition:
        -webkit-transform 0.3s ease-out,
        opacity 0.3s ease-in;
    transition:
        -moz-transform 0.3s ease-out,
        opacity 0.3s ease-in;
    transition:
        -o-transform 0.3s ease-out,
        opacity 0.3s ease-in;
    transition:
        transform 0.3s ease-out,
        opacity 0.3s ease-in;
}

.leaflet-cluster-spider-leg {
    /* stroke-dashoffset (duration and function) should match with leaflet-marker-icon transform in order to track it exactly */
    transition:
        -webkit-stroke-dashoffset 0.3s ease-out,
        -webkit-stroke-opacity 0.3s ease-in;
    transition:
        -moz-stroke-dashoffset 0.3s ease-out,
        -moz-stroke-opacity 0.3s ease-in;
    transition:
        -o-stroke-dashoffset 0.3s ease-out,
        -o-stroke-opacity 0.3s ease-in;
    transition:
        stroke-dashoffset 0.3s ease-out,
        stroke-opacity 0.3s ease-in;
}
